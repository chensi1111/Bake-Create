import{aN as Y,o as D,F as $,f as _,aJ as x,W as j,bu as A,ae as T,j as F,bv as k,H as U,bw as J,bx as K,b2 as V,by as q,bz as y,a6 as G,aE as L,d as Q,z as Z,al as S,h as R}from"./DyyCZs6m.js";import{P as b}from"./BZnxJvvq.js";let v;const ee=e=>{var o;if(!Y)return 0;if(v!==void 0)return v;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const l=n.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),v=a-l,v},ue=(e,o,t,a)=>{let n={offsetX:0,offsetY:0};const l=i=>{const f=i.clientX,W=i.clientY,{offsetX:p,offsetY:h}=n,d=e.value.getBoundingClientRect(),w=d.left,E=d.top,O=d.width,P=d.height,B=document.documentElement.clientWidth,H=document.documentElement.clientHeight,N=-w+p,X=-E+h,z=B-w-O+p,I=H-E-P+h,M=C=>{let r=p+C.clientX-f,m=h+C.clientY-W;a!=null&&a.value||(r=Math.min(Math.max(r,N),z),m=Math.min(Math.max(m,X),I)),n={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${x(r)}, ${x(m)})`)},g=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",g)},s=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)},u=()=>{n={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return D(()=>{$(()=>{t.value?s():c()})}),_(()=>{c()}),{resetPostion:u}},ie=(e,o={})=>{j(e)||A("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||T("popup"),a=F(()=>t.bm("parent","hidden"));if(!Y||k(document.body,a.value))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{q(document==null?void 0:document.body,a.value),l&&document&&(document.body.style.width=s)},200)};U(e,u=>{if(!u){c();return}l=!k(document.body,a.value),l&&(s=document.body.style.width),n=ee(t.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=J(document.body,"overflowY");n>0&&(i||f==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),K(document.body,a.value)}),V(()=>c())},te=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:s=>{o=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},oe=G({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ae=Q({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:o,emit:t}){const a=T(se),n=u=>{t("click",u)},{onClick:l,onMousedown:s,onMouseup:c}=te(e.customMaskEvent?void 0:n);return()=>e.mask?Z("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:s,onMouseup:c},[S(o,"default")],b.STYLE|b.CLASS|b.PROPS,["onClick","onMouseup","onMousedown"]):R("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}});const de=ae;export{de as E,ie as a,te as b,ue as u};
