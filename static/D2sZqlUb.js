import{E as R}from"./Pqyqk8HP.js";import{d as z,a as M,u as W,r as t,S as $,t as T,v as X,x as s,z as i,M as e,W as m,ag as _,U as w,X as b,y as x,B as C,A as E,ax as Z,ay as j,$ as q,Z as F,R as G,a1 as H}from"./OphSlgzW.js";import{E as J}from"./DwYbvxe4.js";import{s as K}from"./ChCngYTh.js";import"./HEVJa2N9.js";import"./CRm-jryX.js";const L={class:"p-3"},O={class:"mb-3"},Q={class:"mb-3"},Y={class:"mb-3"},ee={class:"mb-3"},ae={class:"mb-3"},se={class:"dialog-footer"},de=z({__name:"register",setup(le){const{$firebaseDb:N}=M(),B=N,U=W(),d=t(),c=t(),p=t(),v=t(),g=t(),f=t(),r=t(),n=t(),h=t(),y=t(3),V=t(!1),D=$(),S=()=>{if(f.value="",r.value="",n.value="",h.value="",!d.value){f.value="請輸入姓名";return}if(!c.value){r.value="請輸入信箱";return}if(!p.value){h.value="請輸入電話號碼";return}if(v.value!==g.value){n.value="密碼不相同";return}Z(D,c.value,v.value).then(async u=>{const a=u.user;try{await j(a,{displayName:d.value}),await q(F(B,"users",a.uid),{phone:p.value,userName:d.value,email:c.value}),V.value=!0;const o=K(()=>{y.value--,y.value===0&&(clearInterval(o),k())},1e3)}catch(o){G({message:"註冊失敗",type:"error"}),console.log(o)}}).catch(u=>{u.code==="auth/invalid-email"&&(r.value="請輸入正確Email"),u.code==="auth/email-already-in-use"?r.value="該email已使用":(u.code==="auth/missing-password"&&(n.value="密碼不能為空"),u.code==="auth/weak-password"&&(n.value="密碼不能少於6位數"))})};function k(){V.value=!1,U.push({path:"/"})}function A(){U.push({path:"/member"})}return(u,a)=>{const o=R,I=H,P=J;return T(),X("div",L,[s("div",O,[i(o,{modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=l=>m(d)?d.value=l:null),placeholder:"姓名",class:_({error:e(f)})},null,8,["modelValue","class"]),w(s("div",{class:"mt-1 text-sm text-red-500"},x(e(f)),513),[[b,e(f)]])]),s("div",Q,[i(o,{modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=l=>m(c)?c.value=l:null),placeholder:"信箱",class:_({error:e(r)})},null,8,["modelValue","class"]),w(s("div",{class:"mt-1 text-sm text-red-500"},x(e(r)),513),[[b,e(r)]])]),s("div",Y,[i(o,{modelValue:e(p),"onUpdate:modelValue":a[2]||(a[2]=l=>m(p)?p.value=l:null),placeholder:"電話",class:_({error:e(h)})},null,8,["modelValue","class"]),w(s("div",{class:"mt-1 text-sm text-red-500"},x(e(h)),513),[[b,e(h)]])]),s("div",ee,[i(o,{modelValue:e(v),"onUpdate:modelValue":a[3]||(a[3]=l=>m(v)?v.value=l:null),placeholder:"至少6位數密碼",class:_({error:e(n)}),"show-password":""},null,8,["modelValue","class"]),w(s("div",{class:"mt-1 text-sm text-red-500"},x(e(n)),513),[[b,e(n)]])]),s("div",ae,[i(o,{modelValue:e(g),"onUpdate:modelValue":a[4]||(a[4]=l=>m(g)?g.value=l:null),placeholder:"確認密碼",class:_({error:e(n)}),"show-password":""},null,8,["modelValue","class"])]),s("div",{class:"mt-4"},[s("div",{class:"mb-2 cursor-pointer bg-black py-1 text-center text-white",onClick:S}," 註冊 ")]),s("div",{class:"mt-5 text-center"},[C(" 已經有帳號?"),s("span",{class:"ml-2 cursor-pointer font-bold",onClick:A},"點我登入")]),i(P,{modelValue:e(V),"onUpdate:modelValue":a[5]||(a[5]=l=>m(V)?V.value=l:null),title:"提示"},{footer:E(()=>[s("div",se,[i(I,{type:"primary",onClick:k},{default:E(()=>[C(" 確認 ")]),_:1})])]),default:E(()=>[s("span",null,"登入成功，"+x(e(y))+"秒後將自動跳轉",1)]),_:1},8,["modelValue"])])}}});export{de as default};
