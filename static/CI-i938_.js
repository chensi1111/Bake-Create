import{aO as Y,o as D,F as $,f as F,aK as x,X as _,bu as j,af as O,j as A,bv as k,H as K,bw as U,bx as V,b5 as q,by as G,bz as y,a7 as J,aF as L,d as Q,z as Z,an as S,h as R}from"./BmZGITcj.js";import{P as b}from"./NlcI7sxJ.js";let v;const ee=e=>{var o;if(!Y)return 0;if(v!==void 0)return v;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const a=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const l=n.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),v=a-l,v},ue=(e,o,t,a)=>{let n={offsetX:0,offsetY:0};const l=i=>{const f=i.clientX,T=i.clientY,{offsetX:p,offsetY:h}=n,d=e.value.getBoundingClientRect(),w=d.left,M=d.top,W=d.width,P=d.height,X=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-w+p,z=-M+h,N=X-w-W+p,I=B-M-P+h,g=E=>{let r=p+E.clientX-f,m=h+E.clientY-T;a!=null&&a.value||(r=Math.min(Math.max(r,H),N),m=Math.min(Math.max(m,z),I)),n={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${x(r)}, ${x(m)})`)},C=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",C)},s=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)},u=()=>{n={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return D(()=>{$(()=>{t.value?s():c()})}),F(()=>{c()}),{resetPostion:u}},ie=(e,o={})=>{_(e)||j("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||O("popup"),a=A(()=>t.bm("parent","hidden"));if(!Y||k(document.body,a.value))return;let n=0,l=!1,s="0";const c=()=>{setTimeout(()=>{G(document==null?void 0:document.body,a.value),l&&document&&(document.body.style.width=s)},200)};K(e,u=>{if(!u){c();return}l=!k(document.body,a.value),l&&(s=document.body.style.width),n=ee(t.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=U(document.body,"overflowY");n>0&&(i||f==="scroll")&&l&&(document.body.style.width=`calc(100% - ${n}px)`),V(document.body,a.value)}),q(()=>c())},te=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:s=>{o=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},oe=J({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ae=Q({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:o,emit:t}){const a=O(se),n=u=>{t("click",u)},{onClick:l,onMousedown:s,onMouseup:c}=te(e.customMaskEvent?void 0:n);return()=>e.mask?Z("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:s,onMouseup:c},[S(o,"default")],b.STYLE|b.CLASS|b.PROPS,["onClick","onMouseup","onMousedown"]):R("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[S(o,"default")])}});const de=ae;export{de as E,ie as a,te as b,ue as u};
